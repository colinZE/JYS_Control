<!DOCTYPE html>
<head>
	<title>Login One</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link href="/static/css/login_css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="/static/css/login_css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="/static/css/login_css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
	<link href="/static/css/login_css/templatemo_style.css" rel="stylesheet" type="text/css">
    <style>
        .d2{ right: 200px }
        .alert_text{ width:1px; height:34px; line-height:34px; color:red; top:0; white-space:nowrap;}
    </style>
</head>
<body class="templatemo-bg-gray">
	<div class="container">
		<div class="col-md-12">
			<h1 class="margin-bottom-15">Login Form One</h1>
			<form class="form-horizontal templatemo-container templatemo-login-form-1 margin-bottom-30" role="form" action="#" method="post">				
		        <div class="form-group">
		          <div class="col-xs-12">		            
		            <div class="control-wrapper">
		            	<label for="username" class="control-label fa-label"><i class="fa fa-user fa-medium"></i></label>
		            	<input type="text" class="form-control" id="username" placeholder="Username">
		            </div>		            	            
		          </div>              
		        </div>
		        <div class="form-group">
		          <div class="col-md-12">
		          	<div class="control-wrapper">
		            	<label for="password" class="control-label fa-label"><i class="fa fa-lock fa-medium"></i></label>
		            	<input type="password" class="form-control" id="password" placeholder="Password">
		            </div>
		          </div>
		        </div>
		        <div class="form-group">
		          <div class="col-md-12">
	             	<div class="checkbox control-wrapper">
	                	<label>
	                  		<input type="checkbox"> Remember me
                		</label>
	              	</div>
		          </div>
		        </div>
		        <div class="form-group">
		          <div class="col-md-12">
		          	<div class="control-wrapper">
		          		<input type="button" id="denglu" value="Log in" class="btn btn-info">
		          		<a href="forgot-password.html" class="text-right pull-right">Forgot password?</a>
		          	</div>
		          </div>
		        </div>
		        <hr>
                <div class="form-group d2">
                    <div class="col-md-12">
                        <p class="alert_text text-center"></p>
                    </div>
                </div>
                </form>
                <div class="form-group text-center">
                    <div class="col-md-12">
                        <a href="/sign_in/" class="templatemo-create-new">Create new account <i class="fa fa-arrow-circle-o-right"></i></a>
                    </div>
                </div>
		</div>
	</div>
    <!-- Modal -->
    <div class="modal fade" id="templatemo_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">Warning</h4>
                </div>
                <div class="modal-body text-center" id="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript" src="/static/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
</body>
</html>

<script type="text/javascript">
    $('#denglu').on("click",function(){
        //$('p').addClass('hide');
        var username = $('#username').val();
        var password = $('#password').val();
        console.log(username,password)
        $.ajax({
            type: "post",
            url: "/login/",
            data: {
                csrfmiddlewaretoken: $('#csrfmiddlewaretoken').val(),
                username: $('#username').val(),
                password: $('#password').val()
            },
            dataType: "json",
            success:function(data){
                if(data.succ){
                    console.log(data.succ);
                    //window.location.href=getRootPath_web()+"/index";
                    window.location.href="/index";
                }else{
                     for (var e in data){
                         $('#modal-body').text(data[e]);
                         $('#templatemo_modal').modal();
                    };
                }

            }
        })
    })
</script>